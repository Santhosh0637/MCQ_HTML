const QUESTIONS = [{"q": "1. What does HTML stand for?", "opts": ["a) Hyper Text Markup Language", "b) High Text Markup Language", "c) Hyperlinking Text Markup", "d) Home Tool Markup Language"], "ans": "a"}, {"q": "2. Which tag defines the root of an HTML document?", "opts": ["a) <head>", "b) <html>", "c) <body>", "d) <main>"], "ans": "b"}, {"q": "3. Which tag defines a paragraph?", "opts": ["a) <para>", "b) <p>", "c) <text>", "d) <paragraph>"], "ans": "b"}, {"q": "4. Which tag inserts a line break?", "opts": ["a) <br>", "b) <break>", "c) <lb>", "d) <newline>"], "ans": "a"}, {"q": "5. Which tag is used to display an image?", "opts": ["a) <image>", "b) <img>", "c) <src>", "d) <picture>"], "ans": "b"}, {"q": "6. What attribute is required to display an image URL?", "opts": ["a) href", "b) src", "c) link", "d) url"], "ans": "b"}, {"q": "7. Which attribute provides alternate text for an image?", "opts": ["a) title", "b) alt", "c) desc", "d) caption"], "ans": "b"}, {"q": "8. Which element is used to create a hyperlink?", "opts": ["a) <link>", "b) <a>", "c) <href>", "d) <url>"], "ans": "b"}, {"q": "9. How do you open a link in a new tab?", "opts": ["a) target=\"new\"", "b) target=\"_blank\"", "c) target=\"tab\"", "d) target=\"_newtab\""], "ans": "b"}, {"q": "10. Which tag is used to create an unordered list?", "opts": ["a) <ol>", "b) <ul>", "c) <li>", "d) <list>"], "ans": "b"}, {"q": "11. Which tag is used for ordered lists?", "opts": ["a) <ul>", "b) <ol>", "c) <dl>", "d) <list>"], "ans": "b"}, {"q": "12. Which tag defines a list item?", "opts": ["a) <li>", "b) <item>", "c) <listitem>", "d) <liitem>"], "ans": "a"}, {"q": "13. Which tag is used to create a table?", "opts": ["a) <table>", "b) <grid>", "c) <tbl>", "d) <datatable>"], "ans": "a"}, {"q": "14. Which tag defines a table row?", "opts": ["a) <td>", "b) <tr>", "c) <th>", "d) <row>"], "ans": "b"}, {"q": "15. Which tag defines a table header cell?", "opts": ["a) <th>", "b) <head>", "c) <td>", "d) <thead>"], "ans": "a"}, {"q": "16. Which tag defines a table data cell?", "opts": ["a) <td>", "b) <th>", "c) <cell>", "d) <data>"], "ans": "a"}, {"q": "17. How do you add a comment in HTML?", "opts": ["a) // comment", "b) <!-- comment -->", "c) /* comment */", "d) # comment"], "ans": "b"}, {"q": "18. Which tag is used to embed JavaScript?", "opts": ["a) <js>", "b) <script>", "c) <javascript>", "d) <code>"], "ans": "b"}, {"q": "19. Which tag is used to include an external CSS file?", "opts": ["a) <link>", "b) <stylesheet>", "c) <style>", "d) <css>"], "ans": "a"}, {"q": "20. Which tag is used for embedding styles directly into HTML?", "opts": ["a) <css>", "b) <link>", "c) <style>", "d) <script>"], "ans": "c"}, {"q": "21. HTML placeholder question 21", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "22. HTML placeholder question 22", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "23. HTML placeholder question 23", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "24. HTML placeholder question 24", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "25. HTML placeholder question 25", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "26. HTML placeholder question 26", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "27. HTML placeholder question 27", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "28. HTML placeholder question 28", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "29. HTML placeholder question 29", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "30. HTML placeholder question 30", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "31. HTML placeholder question 31", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "32. HTML placeholder question 32", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "33. HTML placeholder question 33", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "34. HTML placeholder question 34", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "35. HTML placeholder question 35", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "36. HTML placeholder question 36", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "37. HTML placeholder question 37", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "38. HTML placeholder question 38", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "39. HTML placeholder question 39", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "40. HTML placeholder question 40", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "41. HTML placeholder question 41", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "42. HTML placeholder question 42", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "43. HTML placeholder question 43", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "44. HTML placeholder question 44", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "45. HTML placeholder question 45", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "46. HTML placeholder question 46", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "47. HTML placeholder question 47", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "48. HTML placeholder question 48", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "49. HTML placeholder question 49", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "50. HTML placeholder question 50", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "51. HTML placeholder question 51", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "52. HTML placeholder question 52", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "53. HTML placeholder question 53", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "54. HTML placeholder question 54", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "55. HTML placeholder question 55", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "56. HTML placeholder question 56", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "57. HTML placeholder question 57", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "58. HTML placeholder question 58", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "59. HTML placeholder question 59", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "60. HTML placeholder question 60", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "61. HTML placeholder question 61", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "62. HTML placeholder question 62", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "63. HTML placeholder question 63", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "64. HTML placeholder question 64", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "65. HTML placeholder question 65", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "66. HTML placeholder question 66", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "67. HTML placeholder question 67", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "68. HTML placeholder question 68", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "69. HTML placeholder question 69", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "70. HTML placeholder question 70", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "71. HTML placeholder question 71", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "72. HTML placeholder question 72", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "73. HTML placeholder question 73", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "74. HTML placeholder question 74", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "75. HTML placeholder question 75", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "76. HTML placeholder question 76", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "77. HTML placeholder question 77", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "78. HTML placeholder question 78", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "79. HTML placeholder question 79", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "80. HTML placeholder question 80", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "81. HTML placeholder question 81", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "82. HTML placeholder question 82", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "83. HTML placeholder question 83", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "84. HTML placeholder question 84", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "85. HTML placeholder question 85", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "86. HTML placeholder question 86", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "87. HTML placeholder question 87", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "88. HTML placeholder question 88", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "89. HTML placeholder question 89", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "90. HTML placeholder question 90", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "91. HTML placeholder question 91", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "92. HTML placeholder question 92", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "93. HTML placeholder question 93", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "94. HTML placeholder question 94", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "95. HTML placeholder question 95", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "96. HTML placeholder question 96", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}, {"q": "97. HTML placeholder question 97", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "a"}, {"q": "98. HTML placeholder question 98", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "b"}, {"q": "99. HTML placeholder question 99", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "c"}, {"q": "100. HTML placeholder question 100", "opts": ["a) Option A", "b) Option B", "c) Option C", "d) Option D"], "ans": "d"}];


// Quiz renderer and 60-minute countdown timer (starts on load)
const questions = QUESTIONS;
const form = document.getElementById('quizForm');
const totalCountEl = document.getElementById('totalCount');
const answeredCountEl = document.getElementById('answeredCount');
const timerDisplay = document.getElementById('timerDisplay');
totalCountEl.textContent = questions.length;

function createQuestionCard(idx, item) {
  const wrapper = document.createElement('div');
  wrapper.className = 'qcard';
  const qhead = document.createElement('div');
  qhead.className = 'qhead';
  qhead.textContent = idx + '. ' + item.q.replace(/^[0-9]+\.\s*/, '');
  wrapper.appendChild(qhead);
  const opts = document.createElement('div');
  opts.className = 'opts';
  item.opts.forEach(optText => {
    const letter = optText.trim().slice(0,1).toLowerCase();
    const label = document.createElement('label');
    const safe = optText.replace(/</g,'&lt;').replace(/>/g,'&gt;');
    label.innerHTML = '<input type="radio" name="q'+idx+'" value="'+letter+'"> ' + safe;
    opts.appendChild(label);
  });
  wrapper.appendChild(opts);
  return wrapper;
}

questions.forEach((q,i) => {
  const card = createQuestionCard(i+1, q);
  form.appendChild(card);
});

function countAnswered() {
  let count = 0;
  for (let i=1;i<=questions.length;i++) {
    const radios = document.getElementsByName('q'+i);
    for (const r of radios) { if (r.checked) { count++; break; } }
  }
  answeredCountEl.textContent = count;
}
form.addEventListener('change', countAnswered);

document.getElementById('clearBtn').addEventListener('click', () => {
  if (confirm('Clear all answers?')) {
    form.reset();
    document.getElementById('result').style.display = 'none';
    countAnswered();
  }
});

const answerKeyEl = document.getElementById('answerKey');
document.getElementById('toggleKeyBtn').addEventListener('click', function() {
  const showing = answerKeyEl.style.display === 'block';
  answerKeyEl.style.display = showing ? 'none' : 'block';
  this.textContent = showing ? 'Show Answers' : 'Hide Answers';
  if (!showing) answerKeyEl.scrollIntoView({behavior:'smooth'});
});

function gradeQuiz(auto=false) {
  let score = 0;
  for (let i=0;i<questions.length;i++) {
    const idx = i+1;
    const radios = document.getElementsByName('q'+idx);
    let selected = null;
    for (const r of radios) if (r.checked) selected = r.value;
    const correct = questions[i].ans;
    if (selected === correct) score++;
  }
  const percent = (score / questions.length * 100).toFixed(1);
  let html = `<h3>Your final score: ${score} / ${questions.length} (${percent}%)</h3>`;
  if (auto) html += `<p class="small">Auto-submitted — time expired.</p>`;
  else html += `<p class="small">Final score shown.</p>`;
  const resultEl = document.getElementById('result');
  resultEl.innerHTML = html;
  resultEl.style.display = 'block';
  resultEl.scrollIntoView({behavior:'smooth'});
}

document.getElementById('submitBtn').addEventListener('click', function(e) {
  e.preventDefault();
  if (!confirm('Submit quiz now?')) return;
  gradeQuiz(false);
});

(function buildAnswerKey() {
  let html = '<h3>Answer Key (1–' + questions.length + ')</h3><ol>';
  for (let i=0;i<questions.length;i++) html += '<li>Q'+(i+1)+': ' + questions[i].ans + '</li>';
  html += '</ol>';
  answerKeyEl.innerHTML = html;
})();

// 60-minute timer
let totalSeconds = 60 * 60;
let timerInterval = null;
function formatTime(s) {
  const mm = Math.floor(s / 60);
  const ss = s % 60;
  return String(mm).padStart(2,'0') + ':' + String(ss).padStart(2,'0');
}
function startTimer() {
  timerDisplay.textContent = formatTime(totalSeconds);
  timerInterval = setInterval(() => {
    totalSeconds--;
    if (totalSeconds <= 0) {
      clearInterval(timerInterval);
      timerDisplay.textContent = '00:00';
      // Auto-submit and disable inputs
      gradeQuiz(true);
      for (let i=1;i<=questions.length;i++) {
        const radios = document.getElementsByName('q'+i);
        for (const r of radios) r.disabled = true;
      }
      alert('Time is up — the quiz has been auto-submitted.');
      return;
    }
    timerDisplay.textContent = formatTime(totalSeconds);
  }, 1000);
}

window.addEventListener('load', () => {
  startTimer();
  countAnswered();
});
